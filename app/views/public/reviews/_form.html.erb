<div class = "row d-flex justify-content-center">
  <div class="field col-6 mt-4">
    <%= f.label :title, "ゲームタイトル", class: "col-form-label" %>
    <%= f.text_field :title, class: "form-control" %>

    <%= f.label :body, "感想", class: "col-form-label mt-3" %>
    <%= f.text_area :body, rows:3, class: "form-control" %>

    <%= f.label :genre_id, "ゲームジャンル", class: "col-form-label mt-3" %>
    <%= f.collection_select :genre_id, Genre.all, :id, :name,{ prompt: '--選択してください--' }, { class: "form-control" } %>

    <% if review.id.nil? %>
      <div class = "form-group" id= "star">
        <%= f.label :rating, "評価" %>
        <%= f.hidden_field :rating, id: :review_star, class: "form-control" %>
        <div id="post_raty"></div>
      </div>
      <script>
        $(document).on('turbolinks:load', function() {
          let elem = document.querySelector('#post_raty');
          if (elem == null) return;

          elem.innerHTML = ""
          let opt = {  
            starOn: "<%= asset_path('star-on.png') %>",
            starOff: "<%= asset_path('star-off.png') %>",
            starHalf: "<%= asset_path('star-half.png') %>",
            scoreName: 'review[rating]',
            score: '<%= @review.rating || 1 %>',
            half: true,
          };
          raty(elem, opt);
        });
      </script>
    <% else %>
      <div class = "form-group">
        <%= render "public/reviews/static_rating", review: @review %>
      </div>
    <% end %>

    <%= f.label :is_active, "投稿を公開しますか？", class: "col-form-label mt-3" %>
      <%= f.radio_button :is_active, true %>
      <%= f.label :is_active, "公開する", value:true %>
      <%= f.radio_button :is_active, false %>
      <%= f.label :is_active, "公開しない", value:false %>
  </div>
</div>